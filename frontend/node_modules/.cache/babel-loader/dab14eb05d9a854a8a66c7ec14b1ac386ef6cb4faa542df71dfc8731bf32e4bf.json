{"ast":null,"code":"import axios from\"axios\";import React,{useState,useEffect}from\"react\";import{format}from'date-fns';import{toast}from\"react-toastify\";import{Link}from\"react-router-dom\";import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faBars,faPencil,faTrash}from'@fortawesome/free-solid-svg-icons';import'bootstrap/dist/css/bootstrap.min.css';import'./UserInput.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserInput=()=>{// State variables\nconst today=new Date().toISOString().split('T')[0];const initialState={date:today,name:'',content:''};const[booking,setBooking]=useState(initialState);const[msgReceive,setMsgReceive]=useState('');const[loading,setLoading]=useState(true);const[output,setOutput]=useState([]);useEffect(()=>{fetchBooking();},[]);//Fetching appointments from server\nconst fetchBooking=async()=>{try{const response=await axios.get(\"https://salon-booking-backend-8k3e.onrender.com/myBooking/booking\");const sortedAppointments=response.data.message.sort((a,b)=>new Date(a.date)-new Date(b.date));setOutput(sortedAppointments);setLoading(false);}catch(error){console.log(error);toast.error(\"Failed to fetch appointments\");}};// handle form changes\nconst handleChange=event=>{const{name,value}=event.target;setBooking({...booking,[name]:value});};// handle form submission\nconst handleSubmit=async event=>{event.preventDefault();if(!booking.name||!booking.content){toast.error(\"Title and Content are Required!\");return;}try{const response=await axios.post(\"https://salon-booking-backend-8k3e.onrender.com/myBooking/booking_add\",booking,{headers:{\"Content-Type\":\"application/json\"}});setMsgReceive(response.data);console.log(response.data);setBooking(initialState);fetchBooking();}catch(error){console.log(error);toast.error(\"Failed to add appointment\");}};const DeleteBooking=async itemId=>{try{const response=await axios.delete(\"https://salon-booking-backend-8k3e.onrender.com/myBooking/booking/\".concat(itemId));toast.success(\"Appointment deleted successfully!\");fetchBooking();console.log(response.data);}catch(error){console.log(error);toast.error(\"Failed to delete Appointment\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"appointmentbox\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"first\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Schedule Appointment\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[\"Enter Date\",/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"date\",placeholder:\"Enter Date\",min:booking.date,onChange:handleChange}),/*#__PURE__*/_jsx(\"br\",{}),\"Enter Name\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",placeholder:\"Enter Name\",onChange:handleChange}),/*#__PURE__*/_jsx(\"br\",{}),\"Enter Service\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"content\",placeholder:\"Enter Service\",onChange:handleChange}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit\"})]}),msgReceive&&/*#__PURE__*/_jsx(\"div\",{style:{color:\"white\",marginTop:\"10px\"},children:msgReceive.message})]}),loading?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border text-primary\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading data...\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"second\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"YOUR APPOINTMENTS\"}),/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:Array.isArray(output)&&output.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"booking-item\",children:[/*#__PURE__*/_jsxs(\"details\",{children:[/*#__PURE__*/_jsx(\"summary\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"booking-controls\",children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faBars,style:{backgroundColor:'transparent',color:\"white\"}})})}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(Link,{to:\"/\".concat(item._id),className:\"link-icon\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faPencil,style:{backgroundColor:'transparent'}}),\"Edit\"]})}),/*#__PURE__*/_jsxs(\"li\",{onClick:()=>DeleteBooking(item._id),children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faTrash,style:{backgroundColor:'transparent'}}),\"Close\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"booking-date\",children:format(new Date(item.date),'dd-MM-yyyy')}),/*#__PURE__*/_jsx(\"div\",{className:\"booking-content\",children:item.content}),/*#__PURE__*/_jsx(\"div\",{className:\"booking-name\",children:item.name})]},index))})]})]});};export default UserInput;","map":{"version":3,"names":["axios","React","useState","useEffect","format","toast","Link","FontAwesomeIcon","faBars","faPencil","faTrash","jsx","_jsx","jsxs","_jsxs","UserInput","today","Date","toISOString","split","initialState","date","name","content","booking","setBooking","msgReceive","setMsgReceive","loading","setLoading","output","setOutput","fetchBooking","response","get","sortedAppointments","data","message","sort","a","b","error","console","log","handleChange","event","value","target","handleSubmit","preventDefault","post","headers","DeleteBooking","itemId","delete","concat","success","className","children","onSubmit","type","placeholder","min","onChange","style","color","marginTop","role","Array","isArray","map","item","index","icon","backgroundColor","to","_id","onClick"],"sources":["D:/Salon_Booking/frontend/src/components/UserInput.jsx"],"sourcesContent":["import axios from \"axios\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { format } from 'date-fns';\r\nimport { toast } from \"react-toastify\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faBars, faPencil, faTrash } from '@fortawesome/free-solid-svg-icons';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport './UserInput.css';\r\n\r\nconst UserInput = () => {\r\n\r\n    // State variables\r\n    const today = new Date().toISOString().split('T')[0];\r\n    const initialState = { date: today, name: '', content: '' }\r\n    const [booking, setBooking] = useState(initialState);\r\n    const [msgReceive, setMsgReceive] = useState('');\r\n    const [loading, setLoading] = useState(true);\r\n    const [output, setOutput] = useState([]);\r\n\r\n    useEffect(()=>{\r\n        fetchBooking();\r\n    },[]);\r\n\r\n    //Fetching appointments from server\r\n    const fetchBooking = async ()=>{\r\n        try{\r\n            const response = await axios.get(`https://salon-booking-backend-8k3e.onrender.com/myBooking/booking`);\r\n            const sortedAppointments = response.data.message.sort((a, b) => new Date(a.date) - new Date(b.date));\r\n            setOutput(sortedAppointments);\r\n            setLoading(false);\r\n        } catch (error){\r\n            console.log(error);\r\n            toast.error(\"Failed to fetch appointments\");\r\n        }\r\n    }\r\n\r\n    // handle form changes\r\n    const handleChange = (event) => {\r\n        const { name, value } = event.target;\r\n        setBooking({ ...booking, [name]: value });\r\n    }\r\n\r\n    // handle form submission\r\n    const handleSubmit = async (event) => {\r\n        event.preventDefault();\r\n\r\n        if (!booking.name || !booking.content) {\r\n            toast.error(\"Title and Content are Required!\");\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const response = await axios.post(\r\n                \"https://salon-booking-backend-8k3e.onrender.com/myBooking/booking_add\",\r\n                booking,\r\n                {headers: { \"Content-Type\": \"application/json\" }}\r\n            );\r\n\r\n            setMsgReceive(response.data);\r\n            console.log(response.data);\r\n            setBooking(initialState);\r\n            fetchBooking();\r\n\r\n        } catch (error) {\r\n            console.log(error);\r\n            toast.error(\"Failed to add appointment\");\r\n        }\r\n    }\r\n\r\n    const DeleteBooking = async (itemId) => {\r\n        try {\r\n            const response = await axios.delete(`https://salon-booking-backend-8k3e.onrender.com/myBooking/booking/${itemId}`);\r\n            toast.success(\"Appointment deleted successfully!\");\r\n            fetchBooking();\r\n            console.log(response.data);\r\n        } catch (error) {\r\n            console.log(error);\r\n            toast.error(\"Failed to delete Appointment\");\r\n        }\r\n    };\r\n    \r\n    return (\r\n        <div className=\"appointmentbox\">\r\n            <div className=\"first\">\r\n                <h2>\r\n                    Schedule Appointment\r\n                </h2>\r\n                <form onSubmit={handleSubmit}>\r\n                    Enter Date\r\n                    <input type=\"date\" name=\"date\" placeholder=\"Enter Date\" min={booking.date} onChange={handleChange} /><br />\r\n                    Enter Name\r\n                    <input type=\"text\" name=\"name\" placeholder=\"Enter Name\" onChange={handleChange} /><br />\r\n                    Enter Service\r\n                    <input type=\"text\" name=\"content\" placeholder=\"Enter Service\" onChange={handleChange} /><br /><br />\r\n                    <button type=\"submit\">Submit</button>\r\n                </form>\r\n\r\n                {msgReceive && (\r\n                    <div style={{ color: \"white\", marginTop: \"10px\" }}>\r\n                        {msgReceive.message}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {loading ? (\r\n                <div className=\"text-center\">\r\n                    <div className=\"spinner-border text-primary\" role=\"status\">\r\n                        <span className=\"visually-hidden\">Loading...</span>\r\n                    </div>\r\n                    <p>Loading data...</p>\r\n                </div>\r\n            ) : (\r\n                <div className=\"second\">\r\n                    <h1>\r\n                        YOUR APPOINTMENTS\r\n                    </h1>\r\n                    <div className=\"container\">\r\n                        {Array.isArray(output) && output.map((item, index) => (\r\n                            <div className=\"booking-item\" key={index}>\r\n                                <details>\r\n                                    <summary>\r\n                                        <div className=\"booking-controls\" >\r\n                                            <FontAwesomeIcon icon={faBars} style={{ backgroundColor: 'transparent', color: \"white\" }} />\r\n                                        </div>\r\n                                    </summary>\r\n                                    <ul>\r\n                                        <li>\r\n                                            <Link to={`/${item._id}`} className=\"link-icon\">\r\n                                                <FontAwesomeIcon icon={faPencil} style={{ backgroundColor: 'transparent' }} />\r\n                                                Edit\r\n                                            </Link>\r\n                                        </li>\r\n                                        <li onClick={() => DeleteBooking(item._id)}>\r\n                                            <FontAwesomeIcon icon={faTrash} style={{ backgroundColor: 'transparent' }} />\r\n                                            Close\r\n                                        </li>\r\n                                    </ul>\r\n                                </details>\r\n                                \r\n                                <div className=\"booking-date\">{format(new Date(item.date), 'dd-MM-yyyy')}</div>\r\n                                <div className=\"booking-content\">{item.content}</div>\r\n                                <div className=\"booking-name\">{item.name}</div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default UserInput;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,MAAM,KAAQ,UAAU,CACjC,OAASC,KAAK,KAAQ,gBAAgB,CACtC,OAASC,IAAI,KAAQ,kBAAkB,CACvC,OAASC,eAAe,KAAQ,gCAAgC,CAChE,OAASC,MAAM,CAAEC,QAAQ,CAAEC,OAAO,KAAQ,mCAAmC,CAC7E,MAAO,sCAAsC,CAC7C,MAAO,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEzB,KAAM,CAAAC,SAAS,CAAGA,CAAA,GAAM,CAEpB;AACA,KAAM,CAAAC,KAAK,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CACpD,KAAM,CAAAC,YAAY,CAAG,CAAEC,IAAI,CAAEL,KAAK,CAAEM,IAAI,CAAE,EAAE,CAAEC,OAAO,CAAE,EAAG,CAAC,CAC3D,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGvB,QAAQ,CAACkB,YAAY,CAAC,CACpD,KAAM,CAACM,UAAU,CAAEC,aAAa,CAAC,CAAGzB,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAAC0B,OAAO,CAAEC,UAAU,CAAC,CAAG3B,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAAC4B,MAAM,CAAEC,SAAS,CAAC,CAAG7B,QAAQ,CAAC,EAAE,CAAC,CAExCC,SAAS,CAAC,IAAI,CACV6B,YAAY,CAAC,CAAC,CAClB,CAAC,CAAC,EAAE,CAAC,CAEL;AACA,KAAM,CAAAA,YAAY,CAAG,KAAAA,CAAA,GAAU,CAC3B,GAAG,CACC,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAjC,KAAK,CAACkC,GAAG,oEAAoE,CAAC,CACrG,KAAM,CAAAC,kBAAkB,CAAGF,QAAQ,CAACG,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAK,GAAI,CAAAvB,IAAI,CAACsB,CAAC,CAAClB,IAAI,CAAC,CAAG,GAAI,CAAAJ,IAAI,CAACuB,CAAC,CAACnB,IAAI,CAAC,CAAC,CACpGU,SAAS,CAACI,kBAAkB,CAAC,CAC7BN,UAAU,CAAC,KAAK,CAAC,CACrB,CAAE,MAAOY,KAAK,CAAC,CACXC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC,CAClBpC,KAAK,CAACoC,KAAK,CAAC,8BAA8B,CAAC,CAC/C,CACJ,CAAC,CAED;AACA,KAAM,CAAAG,YAAY,CAAIC,KAAK,EAAK,CAC5B,KAAM,CAAEvB,IAAI,CAAEwB,KAAM,CAAC,CAAGD,KAAK,CAACE,MAAM,CACpCtB,UAAU,CAAC,CAAE,GAAGD,OAAO,CAAE,CAACF,IAAI,EAAGwB,KAAM,CAAC,CAAC,CAC7C,CAAC,CAED;AACA,KAAM,CAAAE,YAAY,CAAG,KAAO,CAAAH,KAAK,EAAK,CAClCA,KAAK,CAACI,cAAc,CAAC,CAAC,CAEtB,GAAI,CAACzB,OAAO,CAACF,IAAI,EAAI,CAACE,OAAO,CAACD,OAAO,CAAE,CACnClB,KAAK,CAACoC,KAAK,CAAC,iCAAiC,CAAC,CAC9C,OACJ,CAEA,GAAI,CACA,KAAM,CAAAR,QAAQ,CAAG,KAAM,CAAAjC,KAAK,CAACkD,IAAI,CAC7B,uEAAuE,CACvE1B,OAAO,CACP,CAAC2B,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CACpD,CAAC,CAEDxB,aAAa,CAACM,QAAQ,CAACG,IAAI,CAAC,CAC5BM,OAAO,CAACC,GAAG,CAACV,QAAQ,CAACG,IAAI,CAAC,CAC1BX,UAAU,CAACL,YAAY,CAAC,CACxBY,YAAY,CAAC,CAAC,CAElB,CAAE,MAAOS,KAAK,CAAE,CACZC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC,CAClBpC,KAAK,CAACoC,KAAK,CAAC,2BAA2B,CAAC,CAC5C,CACJ,CAAC,CAED,KAAM,CAAAW,aAAa,CAAG,KAAO,CAAAC,MAAM,EAAK,CACpC,GAAI,CACA,KAAM,CAAApB,QAAQ,CAAG,KAAM,CAAAjC,KAAK,CAACsD,MAAM,sEAAAC,MAAA,CAAsEF,MAAM,CAAE,CAAC,CAClHhD,KAAK,CAACmD,OAAO,CAAC,mCAAmC,CAAC,CAClDxB,YAAY,CAAC,CAAC,CACdU,OAAO,CAACC,GAAG,CAACV,QAAQ,CAACG,IAAI,CAAC,CAC9B,CAAE,MAAOK,KAAK,CAAE,CACZC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC,CAClBpC,KAAK,CAACoC,KAAK,CAAC,8BAA8B,CAAC,CAC/C,CACJ,CAAC,CAED,mBACI3B,KAAA,QAAK2C,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC3B5C,KAAA,QAAK2C,SAAS,CAAC,OAAO,CAAAC,QAAA,eAClB9C,IAAA,OAAA8C,QAAA,CAAI,sBAEJ,CAAI,CAAC,cACL5C,KAAA,SAAM6C,QAAQ,CAAEX,YAAa,CAAAU,QAAA,EAAC,YAE1B,cAAA9C,IAAA,UAAOgD,IAAI,CAAC,MAAM,CAACtC,IAAI,CAAC,MAAM,CAACuC,WAAW,CAAC,YAAY,CAACC,GAAG,CAAEtC,OAAO,CAACH,IAAK,CAAC0C,QAAQ,CAAEnB,YAAa,CAAE,CAAC,cAAAhC,IAAA,QAAK,CAAC,aAE3G,cAAAA,IAAA,UAAOgD,IAAI,CAAC,MAAM,CAACtC,IAAI,CAAC,MAAM,CAACuC,WAAW,CAAC,YAAY,CAACE,QAAQ,CAAEnB,YAAa,CAAE,CAAC,cAAAhC,IAAA,QAAK,CAAC,gBAExF,cAAAA,IAAA,UAAOgD,IAAI,CAAC,MAAM,CAACtC,IAAI,CAAC,SAAS,CAACuC,WAAW,CAAC,eAAe,CAACE,QAAQ,CAAEnB,YAAa,CAAE,CAAC,cAAAhC,IAAA,QAAK,CAAC,cAAAA,IAAA,QAAK,CAAC,cACpGA,IAAA,WAAQgD,IAAI,CAAC,QAAQ,CAAAF,QAAA,CAAC,QAAM,CAAQ,CAAC,EACnC,CAAC,CAENhC,UAAU,eACPd,IAAA,QAAKoD,KAAK,CAAE,CAAEC,KAAK,CAAE,OAAO,CAAEC,SAAS,CAAE,MAAO,CAAE,CAAAR,QAAA,CAC7ChC,UAAU,CAACW,OAAO,CAClB,CACR,EACA,CAAC,CAELT,OAAO,cACJd,KAAA,QAAK2C,SAAS,CAAC,aAAa,CAAAC,QAAA,eACxB9C,IAAA,QAAK6C,SAAS,CAAC,6BAA6B,CAACU,IAAI,CAAC,QAAQ,CAAAT,QAAA,cACtD9C,IAAA,SAAM6C,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAC,YAAU,CAAM,CAAC,CAClD,CAAC,cACN9C,IAAA,MAAA8C,QAAA,CAAG,iBAAe,CAAG,CAAC,EACrB,CAAC,cAEN5C,KAAA,QAAK2C,SAAS,CAAC,QAAQ,CAAAC,QAAA,eACnB9C,IAAA,OAAA8C,QAAA,CAAI,mBAEJ,CAAI,CAAC,cACL9C,IAAA,QAAK6C,SAAS,CAAC,WAAW,CAAAC,QAAA,CACrBU,KAAK,CAACC,OAAO,CAACvC,MAAM,CAAC,EAAIA,MAAM,CAACwC,GAAG,CAAC,CAACC,IAAI,CAAEC,KAAK,gBAC7C1D,KAAA,QAAK2C,SAAS,CAAC,cAAc,CAAAC,QAAA,eACzB5C,KAAA,YAAA4C,QAAA,eACI9C,IAAA,YAAA8C,QAAA,cACI9C,IAAA,QAAK6C,SAAS,CAAC,kBAAkB,CAAAC,QAAA,cAC7B9C,IAAA,CAACL,eAAe,EAACkE,IAAI,CAAEjE,MAAO,CAACwD,KAAK,CAAE,CAAEU,eAAe,CAAE,aAAa,CAAET,KAAK,CAAE,OAAQ,CAAE,CAAE,CAAC,CAC3F,CAAC,CACD,CAAC,cACVnD,KAAA,OAAA4C,QAAA,eACI9C,IAAA,OAAA8C,QAAA,cACI5C,KAAA,CAACR,IAAI,EAACqE,EAAE,KAAApB,MAAA,CAAMgB,IAAI,CAACK,GAAG,CAAG,CAACnB,SAAS,CAAC,WAAW,CAAAC,QAAA,eAC3C9C,IAAA,CAACL,eAAe,EAACkE,IAAI,CAAEhE,QAAS,CAACuD,KAAK,CAAE,CAAEU,eAAe,CAAE,aAAc,CAAE,CAAE,CAAC,OAElF,EAAM,CAAC,CACP,CAAC,cACL5D,KAAA,OAAI+D,OAAO,CAAEA,CAAA,GAAMzB,aAAa,CAACmB,IAAI,CAACK,GAAG,CAAE,CAAAlB,QAAA,eACvC9C,IAAA,CAACL,eAAe,EAACkE,IAAI,CAAE/D,OAAQ,CAACsD,KAAK,CAAE,CAAEU,eAAe,CAAE,aAAc,CAAE,CAAE,CAAC,QAEjF,EAAI,CAAC,EACL,CAAC,EACA,CAAC,cAEV9D,IAAA,QAAK6C,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAEtD,MAAM,CAAC,GAAI,CAAAa,IAAI,CAACsD,IAAI,CAAClD,IAAI,CAAC,CAAE,YAAY,CAAC,CAAM,CAAC,cAC/ET,IAAA,QAAK6C,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAEa,IAAI,CAAChD,OAAO,CAAM,CAAC,cACrDX,IAAA,QAAK6C,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAEa,IAAI,CAACjD,IAAI,CAAM,CAAC,GAvBhBkD,KAwB9B,CACR,CAAC,CACD,CAAC,EACL,CACR,EACA,CAAC,CAEd,CAAC,CAED,cAAe,CAAAzD,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}